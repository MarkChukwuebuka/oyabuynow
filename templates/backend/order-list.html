{% extends "./partials/base.html" %}
{% load static %}
{% load currency_filters %}
{% load rating_tags dict_extras %}

{% block content %}

                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="card card-table">
                                <div class="card-body">
                                    <div class="title-header option-title">
                                        <h5>Order List</h5>
<!--                                        <a href="#" class="btn btn-solid">Download all orders</a>-->
                                    </div>
                                    <div>
                                        <div class="table-responsive">
                                            {% if orders %}
                                            <table class="table all-package order-table theme-table" id="table_id">
                                                <thead>
                                                    <tr>
                                                        <th>Order Ref</th>
                                                        <th>Date</th>
                                                        <th>Payment Method</th>
                                                        <th>Delivery Status</th>
                                                        <th>Amount</th>
                                                        <th>Option</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    {% for order in orders %}
                                                    <tr data-bs-toggle="offcanvas" href="#order-details">
                                                        <td>{{ order.ref }}</td>

                                                        <td>{{ order.created_at|date:"F j, Y" }}</td>

                                                        <td>Paystack</td>

                                                        <td class="order-success">
                                                            <span>{{order.status}}</span>
                                                        </td>

                                                        <td>{{ order.total_cost|naira }}</td>

                                                        <td>
                                                            <ul>
                                                                <li>
                                                                    <a href="{% url 'order-detail' order.ref %}">
                                                                        <i class="ri-eye-line"></i>
                                                                    </a>
                                                                </li>


                                                                <li>
                                                                    <a class="btn btn-sm btn-solid text-white"
                                                                        href="order-tracking.html">
                                                                        Tracking
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                    {% endfor %}


                                                </tbody>
                                            </table>
                                            {% else %}
                                            <h3 class="text-center">No orders found.</h3>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Table End -->

{% endblock content %}

{% block scripts %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#orderTable').DataTable({
                "pageLength": 10,
                "lengthMenu": [5, 10, 25, 50, 100],
                "ordering": true,
                "order": [[2, 'desc']], // Default sorting on the third column (Order Date)
                "columnDefs": [
                    { "orderable": false, "targets": [0, 6] } // Disable ordering on the first and last columns
                ]
            });
        });
    </script>
{% endblock scripts %}