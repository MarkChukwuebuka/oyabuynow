{% extends './partials/base.html' %}
{% load currency_filters %}
{% load static %}

{% block content %}
<table class="content-table" style="margin-top: 40px;" align="center" border="0" cellpadding="0"
    cellspacing="0" width="100%">
    <thead>
        <tr>
            <td align="center">
                <img src="{% static 'frontend/assets/images/order-success.png' %}" alt="Order Notification"
                    style="width: 100px; height: auto;">
            </td>
        </tr>
    </thead>
</table>

<table class="content-table" style="margin-top: 30px;" align="center" border="0" cellpadding="0"
    cellspacing="0" width="100%">
    <thead>
        <tr style="display: block;">
            <td style="display: block;">
                <h3 style="font-weight: 700; font-size: 20px; margin: 0;">New Order Received</h3>
            </td>

            <td style="display: block;">
                <p style="font-size: 17px; font-weight: 600; margin: 8px 0; color: #939393;">
                    Hi {{ vendor_name|default:"Vendor" }},
                </p>
            </td>

            <td>
                <p style="font-size: 16px; font-weight: 500; color: #939393; line-height: 1.6;">
                    Great news! One or more of your products have just been ordered by a customer. Below is a
                    summary of the items from your store included in this order.
                </p>
            </td>
        </tr>
    </thead>
</table>

<table class="order-summary" align="center" border="0" cellpadding="0" cellspacing="0" width="100%"
    style="margin-top: 30px; border-collapse: collapse; width: 80%;">
    <thead>
        <tr style="background-color: #f5f5f5; text-align: left;">
            <th style="padding: 10px; font-size: 15px;">Image</th>
            <th style="padding: 10px; font-size: 15px;">Product</th>
            <th style="padding: 10px; font-size: 15px;">Quantity</th>
            <th style="padding: 10px; font-size: 15px;">Price</th>
        </tr>
    </thead>
    <tbody>
        {% for item in ordered_items %}
        <tr>
            <td style="padding: 10px; border-bottom: 1px solid #eee;">
                {% with item.product.product_media.first as first_image %}
                    {% if first_image %}
                    <img
                      src="{{ first_image.image.url }}"
                      class="img-fluid blur-up lazyload"
                      alt="{{ item.product.name }}"
                    />
                    {% endif %}
                {% endwith %}
            </td>
            <td style="padding: 10px; border-bottom: 1px solid #eee;">{{ item.product.name }}</td>
            <td style="padding: 10px; border-bottom: 1px solid #eee;">{{ item.quantity }}</td>
            <td style="padding: 10px; border-bottom: 1px solid #eee;">{{ item.price | naira }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<table align="center" border="0" cellpadding="0" cellspacing="0" width="100%"
    style="margin-top: 20px;">
    <tr>
        <td align="center">
            <p style="font-size: 16px; font-weight: 600; color: #333;">
                Total Amount for Your Products: <strong>{{ total_cost|naira }}</strong>
            </p>
        </td>
    </tr>
</table>

<table class="content-table" style="margin-top: 20px;" align="center" border="0" cellpadding="0"
    cellspacing="0" width="100%">
    <thead>
        <tr>
            <td>
                <p
                    style="font-size: 16px;font-weight: 500;width: 80%;margin: 8px auto 0;line-height: 1.6;color: #939393;">
                    Please prepare the products and ship them out as soon as possible.
                </p>
            </td>
        </tr>
    </thead>
</table>

<table class="button-table" style="margin-top: 30px;" align="center" border="0" cellpadding="0"
    cellspacing="0" width="100%">
    <tr>
        <td align="center">
            <a href="{% url 'vendor-order-detail' order_ref %}"
               style="background-color: #4CAF50; color: #fff; padding: 12px 25px; border-radius: 8px; text-decoration: none; font-weight: 600; display: inline-block;">
                View Order Details
            </a>
        </td>
    </tr>
</table>

<table class="footer-table" style="margin-top: 30px;" align="center" border="0" cellpadding="0"
    cellspacing="0" width="100%">
    <tr>
        <td align="center">
            <p style="font-size: 14px; color: #999; margin-top: 20px;">
                Thank you for being part of our marketplace!
            </p>
        </td>
    </tr>
</table>
{% endblock content %}
